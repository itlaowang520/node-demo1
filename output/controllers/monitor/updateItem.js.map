{"version":3,"sources":["../../../src/controllers/monitor/updateItem.js"],"names":["updateItemController","context","next","appFunc","isEmptyObject","request","body","throw","Error","monitorId","MonitorModel","getItemById","monitor","newDatas","updateItemById","message","code"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;SAEeA,oB;;;;;oFAAf,iBAAoCC,OAApC,EAA6CC,IAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AACI,gBAAIC,iBAAQC,aAAR,CAAsBH,OAAO,CAACI,OAAR,CAAgBC,IAAtC,CAAJ,EAAiD;AAC7CL,cAAAA,OAAO,CAACM,KAAR,CAAc,IAAIC,KAAJ,CAAU,4BAAV,CAAd;AACH;;AACD,gBAAI,CAACP,OAAO,CAACI,OAAR,CAAgBC,IAAhB,CAAqBG,SAA1B,EAAqC;AACjCR,cAAAA,OAAO,CAACM,KAAR,CAAc,IAAIC,KAAJ,CAAU,8BAAV,CAAd;AACH;;AACOC,YAAAA,SAPZ,GAO0BR,OAAO,CAACI,OAAR,CAAgBC,IAP1C,CAOYG,SAPZ;AAAA;AAAA,mBAQwBC,iBAAaC,WAAb,CAAyBF,SAAzB,CARxB;;AAAA;AAQQG,YAAAA,OARR;;AAAA,iBASQA,OATR;AAAA;AAAA;AAAA;;AAUYC,YAAAA,QAVZ,GAUuBZ,OAAO,CAACI,OAAR,CAAgBC,IAVvC;AAAA;AAAA;AAAA,mBAYkBI,iBAAaI,cAAb,CAA4BL,SAA5B,EAAuCI,QAAvC,CAZlB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcY,wBAAEE,OAAF,GAAY,gBAAZ;AACAd,YAAAA,OAAO,CAACM,KAAR;;AAfZ;AAiBQN,YAAAA,OAAO,CAACK,IAAR,GAAe;AACXU,cAAAA,IAAI,EAAE,CADK;AAEXD,cAAAA,OAAO,EAAE;AAFE,aAAf;AAjBR;AAAA;;AAAA;AAsBQd,YAAAA,OAAO,CAACM,KAAR,CAAc,IAAIC,KAAJ,CAAU,aAAV,CAAd;;AAtBR;AAwBIN,YAAAA,IAAI;;AAxBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;eA2BeF,oB","sourcesContent":["import appFunc from '../../utils/appFunc';\nimport MonitorModel from '../../models/monitor';\n\nasync function updateItemController(context, next) {\n    if (appFunc.isEmptyObject(context.request.body)) {\n        context.throw(new Error('更新monitor信息错误，monitor信息为空！'));\n    }\n    if (!context.request.body.monitorId) {\n        context.throw(new Error('更新monitor信息错误，monitorId不能为空！'));\n    }\n    const { monitorId } = context.request.body;\n    let monitor = await MonitorModel.getItemById(monitorId);\n    if (monitor) {\n        let newDatas = context.request.body;\n        try {\n            await MonitorModel.updateItemById(monitorId, newDatas);\n        } catch (e) {\n            e.message = 'monitor信息更新失败！';\n            context.throw(e);\n        }\n        context.body = {\n            code: 0,\n            message: 'monitor信息更新成功!'\n        };\n    } else {\n        context.throw(new Error('没有此monitor!'));\n    }\n    next();\n}\n\nexport default updateItemController;\n"],"file":"updateItem.js"}